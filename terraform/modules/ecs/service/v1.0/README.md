## Requirements

| Name                                                                     | Version  |
| ------------------------------------------------------------------------ | -------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | ~> 1.1.0 |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | >= 5.6.0 |

## Providers

| Name                                             | Version  |
| ------------------------------------------------ | -------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | >= 5.6.0 |

## Modules

AWS IAM ECS Service Module.

## Resources

| Name                                                                                                                              | Type     |
| --------------------------------------------------------------------------------------------------------------------------------- | -------- |
| [aws_alb_listener.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/alb_listener)                 | resource |
| [aws_alb_target_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/alb_target_group)         | resource |
| [aws_cloudwatch_log_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_group) | resource |
| [aws_ecs_service.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ecs_service)                   | resource |
| [aws_ecs_task_definition.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ecs_task_definition)   | resource |

## Inputs

| Name                                                                                                                                                               | Description                                                                                                                                                       | Type                                                                  | Default                                                                                                   | Required |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | :------: |
| <a name="input_account_id"></a> [account_id](#input_account_id)                                                                                                    | AWS account in use                                                                                                                                                | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_assign_public_ip"></a> [assign_public_ip](#input_assign_public_ip)                                                                                  | Assign a public IP address to the ENI (Fargate launch type only)                                                                                                  | `bool`                                                                | `false`                                                                                                   |    no    |
| <a name="input_cd_environmental_variables"></a> [cd_environmental_variables](#input_cd_environmental_variables)                                                    | Environmental Variables set on task definition level                                                                                                              | <pre>list(object({<br> name = string<br> value = string<br> }))</pre> | `null`                                                                                                    |    no    |
| <a name="input_cd_port_mappings_container_port"></a> [cd_port_mappings_container_port](#input_cd_port_mappings_container_port)                                     | The port number on the container instance to reserve for your container.                                                                                          | `number`                                                              | `null`                                                                                                    |    no    |
| <a name="input_cd_port_mappings_host_port"></a> [cd_port_mappings_host_port](#input_cd_port_mappings_host_port)                                                    | The port number on the container instance to reserve for your container.                                                                                          | `number`                                                              | `null`                                                                                                    |    no    |
| <a name="input_cd_protocol"></a> [cd_protocol](#input_cd_protocol)                                                                                                 | The protocol used for the port mapping. Valid values are tcp and udp.                                                                                             | `string`                                                              | `"tcp"`                                                                                                   |    no    |
| <a name="input_cluster_id"></a> [cluster_id](#input_cluster_id)                                                                                                    | Id of the cluster where service to be created                                                                                                                     | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_container_port"></a> [container_port](#input_container_port)                                                                                        | Port on the container to associate with the load balancer.                                                                                                        | `number`                                                              | `0`                                                                                                       |    no    |
| <a name="input_ecs_task_deployment_maximum_percent"></a> [ecs_task_deployment_maximum_percent](#input_ecs_task_deployment_maximum_percent)                         | Upper limit (as a percentage of the service's desiredCount) of the number of running tasks that can be running in a service during a deployment.                  | `number`                                                              | `200`                                                                                                     |    no    |
| <a name="input_ecs_task_deployment_minimum_healthy_percent"></a> [ecs_task_deployment_minimum_healthy_percent](#input_ecs_task_deployment_minimum_healthy_percent) | Lower limit (as a percentage of the service's desiredCount) of the number of running tasks that must remain running and healthy in a service during a deployment. | `number`                                                              | `100`                                                                                                     |    no    |
| <a name="input_ecs_task_desired_count"></a> [ecs_task_desired_count](#input_ecs_task_desired_count)                                                                | Number of instances of the task definition to place and keep running.                                                                                             | `number`                                                              | `0`                                                                                                       |    no    |
| <a name="input_health_check_enabled"></a> [health_check_enabled](#input_health_check_enabled)                                                                      | Determines whether health check will be enabled                                                                                                                   | `bool`                                                                | `true`                                                                                                    |    no    |
| <a name="input_health_check_healthy_threshold"></a> [health_check_healthy_threshold](#input_health_check_healthy_threshold)                                        | Number of consecutive health check successes required before considering a target healthy.                                                                        | `number`                                                              | `3`                                                                                                       |    no    |
| <a name="input_health_check_interval"></a> [health_check_interval](#input_health_check_interval)                                                                   | Target Group health check internval                                                                                                                               | `number`                                                              | `60`                                                                                                      |    no    |
| <a name="input_health_check_matcher"></a> [health_check_matcher](#input_health_check_matcher)                                                                      | The HTTP or gRPC codes to use when checking for a successful response from a target.                                                                              | `string`                                                              | `"200"`                                                                                                   |    no    |
| <a name="input_health_check_path"></a> [health_check_path](#input_health_check_path)                                                                               | Target Group health check path                                                                                                                                    | `string`                                                              | `"/"`                                                                                                     |    no    |
| <a name="input_health_check_protocol"></a> [health_check_protocol](#input_health_check_protocol)                                                                   | Protocol the load balancer uses when performing health checks on targets.                                                                                         | `string`                                                              | `"HTTP"`                                                                                                  |    no    |
| <a name="input_health_check_timeout"></a> [health_check_timeout](#input_health_check_timeout)                                                                      | Amount of time, in seconds, during which no response from a target means a failed health check                                                                    | `number`                                                              | `10`                                                                                                      |    no    |
| <a name="input_health_check_ubhealthy_threshold"></a> [health_check_ubhealthy_threshold](#input_health_check_ubhealthy_threshold)                                  | Number of consecutive health check failures required before considering a target unhealthy.                                                                       | `number`                                                              | `3`                                                                                                       |    no    |
| <a name="input_image_name"></a> [image_name](#input_image_name)                                                                                                    | ECR image name                                                                                                                                                    | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_image_tag"></a> [image_tag](#input_image_tag)                                                                                                       | ECR image tag                                                                                                                                                     | `string`                                                              | `"latest"`                                                                                                |    no    |
| <a name="input_listener_certificate_arn"></a> [listener_certificate_arn](#input_listener_certificate_arn)                                                          | ARN of the default SSL server certificate. Exactly one certificate is required if the protocol is HTTPS                                                           | `string`                                                              | `null`                                                                                                    |    no    |
| <a name="input_listener_defailt_action"></a> [listener_defailt_action](#input_listener_defailt_action)                                                             | Type of routing action.                                                                                                                                           | `string`                                                              | `"forward"`                                                                                               |    no    |
| <a name="input_listener_port"></a> [listener_port](#input_listener_port)                                                                                           | Port on which the load balancer is listening.                                                                                                                     | `number`                                                              | `0`                                                                                                       |    no    |
| <a name="input_listener_protocol"></a> [listener_protocol](#input_listener_protocol)                                                                               | Protocol for connections from clients to the load balancer.                                                                                                       | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_listener_ssl_policy"></a> [listener_ssl_policy](#input_listener_ssl_policy)                                                                         | Name of the SSL Policy for the listener.                                                                                                                          | `string`                                                              | `null`                                                                                                    |    no    |
| <a name="input_load_balancer_arn"></a> [load_balancer_arn](#input_load_balancer_arn)                                                                               | ARN of the load balancer being used.                                                                                                                              | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_prefix"></a> [prefix](#input_prefix)                                                                                                                | Used as resources ownership marker                                                                                                                                | `string`                                                              | `"kkalugeroff"`                                                                                           |    no    |
| <a name="input_region"></a> [region](#input_region)                                                                                                                | AWS regio in use                                                                                                                                                  | `string`                                                              | `"eu-west-1"`                                                                                             |    no    |
| <a name="input_service_launch_type"></a> [service_launch_type](#input_service_launch_type)                                                                         | Launch type on which to run your service. The valid values are EC2, FARGATE, and EXTERNAL                                                                         | `string`                                                              | `"FARGATE"`                                                                                               |    no    |
| <a name="input_service_name"></a> [service_name](#input_service_name)                                                                                              | Name of the service                                                                                                                                               | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_service_security_group_ids"></a> [service_security_group_ids](#input_service_security_group_ids)                                                    | Security groups associated with the task or service.                                                                                                              | `list(string)`                                                        | `[]`                                                                                                      |    no    |
| <a name="input_service_subnet_ids"></a> [service_subnet_ids](#input_service_subnet_ids)                                                                            | Subnets associated with the task or service.                                                                                                                      | `list(string)`                                                        | `[]`                                                                                                      |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                                                      | Default resource tags                                                                                                                                             | `map(string)`                                                         | <pre>{<br> "DeleteMe": "No",<br> "Deployment": "Terraform",<br> "Owner": "Kristiyan Kalugerov"<br>}</pre> |    no    |
| <a name="input_target_group_port"></a> [target_group_port](#input_target_group_port)                                                                               | Port on which targets receive traffic, unless overridden when registering a specific target.                                                                      | `number`                                                              | `0`                                                                                                       |    no    |
| <a name="input_target_group_protocol"></a> [target_group_protocol](#input_target_group_protocol)                                                                   | Protocol to use for routing traffic to the targets                                                                                                                | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_target_type"></a> [target_type](#input_target_type)                                                                                                 | ALB target group type                                                                                                                                             | `string`                                                              | `"ip"`                                                                                                    |    no    |
| <a name="input_td_cpu_units"></a> [td_cpu_units](#input_td_cpu_units)                                                                                              | Number of cpu units used by the task.                                                                                                                             | `number`                                                              | `512`                                                                                                     |    no    |
| <a name="input_td_execution_role_arn"></a> [td_execution_role_arn](#input_td_execution_role_arn)                                                                   | Task execution role ARN                                                                                                                                           | `string`                                                              | `null`                                                                                                    |    no    |
| <a name="input_td_memory"></a> [td_memory](#input_td_memory)                                                                                                       | Amount (in MiB) of memory used by the task.                                                                                                                       | `number`                                                              | `1024`                                                                                                    |    no    |
| <a name="input_td_network_mode"></a> [td_network_mode](#input_td_network_mode)                                                                                     | Docker networking mode to use for the containers in the task.                                                                                                     | `string`                                                              | `"awsvpc"`                                                                                                |    no    |
| <a name="input_td_requires_compatibilities"></a> [td_requires_compatibilities](#input_td_requires_compatibilities)                                                 | Set of launch types required by the task.                                                                                                                         | `list(string)`                                                        | <pre>[<br> "FARGATE"<br>]</pre>                                                                           |    no    |
| <a name="input_td_task_role_arn"></a> [td_task_role_arn](#input_td_task_role_arn)                                                                                  | Task role ARN                                                                                                                                                     | `string`                                                              | `null`                                                                                                    |    no    |
| <a name="input_usage"></a> [usage](#input_usage)                                                                                                                   | What resource is used for                                                                                                                                         | `string`                                                              | `""`                                                                                                      |    no    |
| <a name="input_vpc_id"></a> [vpc_id](#input_vpc_id)                                                                                                                | VPC ID where target group needs to be created                                                                                                                     | `string`                                                              | `""`                                                                                                      |    no    |

## Outputs

| Name                                                                                                        | Description                                                              |
| ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| <a name="output_service_id"></a> [service_id](#output_service_id)                                           | ARN that identifies the service                                          |
| <a name="output_service_name"></a> [service_name](#output_service_name)                                     | Name of the service                                                      |
| <a name="output_task_definition_arn"></a> [task_definition_arn](#output_task_definition_arn)                | Full ARN of the Task Definition (including both `family` and `revision`) |
| <a name="output_task_definition_family"></a> [task_definition_family](#output_task_definition_family)       | The unique name of the task definition                                   |
| <a name="output_task_definition_revision"></a> [task_definition_revision](#output_task_definition_revision) | Revision of the task in a particular family                              |
